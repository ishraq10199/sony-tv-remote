<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Sony TV Web Page Remote</title>
  <meta name="description" content="Control a Sony Bravia TV by sending remote commands.">
  <meta name="author" content="avinash@aczoom.com">
  <!-- Mobile Specific Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="sony-tv.css">
  <link rel="icon" type="image/png" href="images/tv-icon-128.png"> </head>
<body>
  <h1>Sony TV Remote</h1>
  <!-- =================================================================
     Sony TV Web Page Remote
     Uses Sony Bravia TV IRCC (IR like control commands) sent using HTTP POST.

     This web page used the script file to display a set of buttons that
     when clicked send a command to the TV.

     Since this has to send a Javascript request to a different IP address,
     it MAY run afoul of same origin policy restrictions. But there seem to be
     edge conditions if the web page is saved locally and accessed using
     file:// URL which then uses Javascript to POST to http:// URL, it works
     fine in latest Chrome, Firefox (Jan 2017).
     In any case, if that fails, here are the options:
     1: Change this script to use node.js or server side scripting which
     does not run afoul of same origin policy.
     2: Load this as a Web Extension which asks for permissions to access
     remote URLs, so avoids cross origin policy cross-domain restrictions.

     Works on Chrome, Firefox, Edge.

     Requires Javascript ES2015 (ES6). Works with most browsers in 2020.
     Uses localStorage, for of loop, etc.
     2023: Added REST API tab to allow use of JSON RPC commands. Requires
     manually entering JSON strings as described in the Sony guides:
     https://pro-bravia.sony.net/develop/integrate/rest-api/spec/index.html

     There are a number of similar tools available - from command line
     scripts to server side Javascript. Use a web search such as "Sony
     TV IRCC" to find references.
  ================================================================= -->
  <div class="columns" id="tabs-navigation">
    <div class="one-fourth-item tab-link" id="tab-buttons-link"><a>Buttons IRCC</a></div>
    <div class="one-fourth-item tab-link" id="tab-restapi-link"><a>Buttons REST</a></div>
    <div class="one-fourth-item tab-link" id="tab-setup-link"><a>Setup</a></div>
  </div>
  <!-- display error/status messages on a popup, usually centered on browser page using css -->
  <div class="popup-text hide-initial" id="popup-text">Sony TV Remote Control</div>
  <hr>
  <div class="tabs-all-content">
    <div class="tab-content" id="tab-buttons-content">
      <!-- Frequently Used -->
      <div class="columns" id="tv-volume">
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="TvPower">ON &middot; OFF</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Mute">Mute &#x1F507;</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Jump">Jump &#x21B6;</button>
        </div>
        <!-- Command input text box -->
        <form id="tv-command-input">
          <!-- put content one-fourth-item inside form otherwise fieldset border has too much
               padding on right, and border around fieldset looks weird -->
          <div class="one-fourth-item">
            <fieldset>
              <legend>Type-in</legend>
              <input type="text" id="tv-input-1" autocorrect="off" autocapitalize="none" spellcheck="false" placeholder="Ex: 7.1">
              <br>
              <button type="submit" class="tv-command">Send</button>
            </fieldset>
          </div>
        </form>
      </div>
      <hr>
      <!-- Command input text box
      <form id="tv-command-input">
        <fieldset>
          <legend>Type-in Commands</legend>
          <input type="text" id="tv-input-1" autocorrect="off" autocapitalize="none" spellcheck="false" placeholder="Example: 7.1">
          <button type="submit" class="tv-command">Send</button>
        </fieldset>
      </form>
      <hr>
      -->
      
      <!-- Display aspect ratio -->
      <!-- these won't work unless a long 0.5 sec or so delay is sent between Up/Down commands -->
      <!-- No longer used so remove buttons from web page
      <div class="columns" id="tv-display-ratio">
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Wide Up Up Up Return">Wide&nbsp;Zoom </button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Wide Down Down Down Up Up Return">Normal</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Wide Up Return">Wide&nbsp;&#x21E1;</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Wide Down Return">Wide&nbsp;&#x21E3;</button>
        </div>
      </div>
      <hr>
      -->
      <!-- Volume and Channel Increment -->
      <div class="columns" id="tv-volume-channel">
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="VolumeDown">&#x1f509; Vol &#x25bd;</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="VolumeUp">&#x1f50A; Vol &#x25b3;</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="ChannelDown">CH &#x2796;</button>
        </div>
        <div class="one-fourth-item">
            <button type="button" class="tv-command" data-stv.commands="ChannelUp">CH &#x2795;</button>
        </div>
      </div>
      <hr>
      <!-- Mute Off Reboot  -->
      <div class="columns" id="tv-off">
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="PowerOff">OFF &#x2B58;</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Mute">Mute &#x1F507;</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Jump">Jump &#x21B6;</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="rest-command" id="reboot-button1">Reboot &#x21ba;</button>
        </div>
      </div>
      <hr>
      <!-- Apps -->
      <div class="columns" id="apps">
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Home">Home &#x1F3E0;</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="rest-command" id="youtube-button">YouTube</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Hdmi2">Google TV</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Tv">TV &#x1F4FA;</button>
        </div>
      </div>
      <hr>
      <!-- Fast forward, rewind -->
      <div class="columns" id="tv-ffrw">
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Pause" title="Pause">Pause &#x23F8;</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Rewind" title="Rewind">&#x23EA; Rewind</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Play" title="Play">Play &#x25B6;</button>
        </div>
        <div class="one-fourth-item">
          <button type="button" class="tv-command" data-stv.commands="Forward" title="Forward">Forward &#x23E9;</button>
        </div>
      </div>
      <hr>
    </div>
    <!-- tab-buttons-content -->
    <!-- Setup -->
    <div class="tab-content" id="tab-setup-content">
      <h2>TV Setup</h2>
      <form id="tv-setup">
        <fieldset>
          <legend>Setup</legend>
          <p>
            <label for="tv-ip-address">Sony TV IP Address:</label>
            <input type="text" id="tv-ip-address" autocorrect="off" autocapitalize="none" spellcheck="false" placeholder="Example: 10.0.0.100"> </p>
          <p>
            <label for="tv-key">Sony TV Pre-Shared Key:</label>
            <input type="text" id="tv-key" autocorrect="off" autocapitalize="none" spellcheck="false" placeholder="Enter TV Pre-Shared Key"> </p>
          <hr>
          
          <button type="submit">Save</button>
          <p>Data is saved locally on this browser.</p>
        </fieldset>
      </form>
      <p class="messages"></p>
      <!-- Javascript error or status message -->
      <hr>
    </div>
    <!-- REST API JSON RPC IP Control Help and Commands -->
    <div class="tab-content" id="tab-restapi-content">
      <h2>REST API JSON RPC</h2>
      <p>This section uses the REST API using JSON RPC as described here <a href="https://pro-bravia.sony.net/develop/integrate/rest-api/spec/index.html">Sony TV Knowledge Center REST API</a>.
      <p>REST API supports a different set of commands from what is supported by
      the remote-control IRCC-IP commands.
      </p>
      <h3>Pre-set commands</h3>
      </a>
      <div class="columns" id="rest-commands">
        <button type="button" class="rest-command" id="getCurrentTime-button">getCurrentTime</button>
        <button type="button" class="rest-command" id="getApplicationList-button">getApplicationList</button>
        <button type="button" class="rest-command" id="reboot-button2">Reboot &#x21ba;</button>
      </div>
      <p>
      <label for="rest-service-output">API command output:</label>
      <textarea id="rest-service-output" autocorrect="off" autocapitalize="none" spellcheck="false" rows="10" cols="72" readonly="true"></textarea>
      <p>
      <form id="rest-service-form">
        <fieldset>
          <legend><h3>Or manually fill in REST API command details</h3></legend>
            <label for="rest-service">Name:</label>
            <select name="Service" id="rest-service" required="true">
              <option value="appControl" selected="true">appControl</option>
              <option value="audio">audio</option>
              <option value="avContent">avContent</option>
              <option value="encryption">encryption</option>
              <option value="guide">guide</option>
              <option value="system">system</option>
              <option value="videoScreen">videoScreen</option>
            </select>
          <p>
          <label for="rest-json">JSON:</label>
            <textarea id="rest-json" autocorrect="off" autocapitalize="none" spellcheck="false" rows="7" cols="72"></textarea>
          </p>
          <button type="submit">Send</button>
        </fieldset>
      </form>
      </p>

      
    </div> <!-- tab-restapi-content -->
  </div> <!-- tabs-all-content -->
  <!-- End Document =============================================== -->
  <script src="sony-tv.js"></script>
</body>

</html>
